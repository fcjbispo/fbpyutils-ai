# Project Plans Overview

This document provides a consolidated overview of all planning documents, ordered chronologically by their sequential numbering.

| Nome do Arquivo do Plano | Descrição Geral do Planejamento | Implementações Feitas |
|---|---|---|
| PLAN_001_REFACTOR_HTTP_CLIENTS.md | Plano de Refactoring: HTTPClient e RequestsManager | - Análise de Dependências: Identificar todos os arquivos e funções que importam e utilizam as classes HTTPClient e RequestsManager. - Refatorar HTTPClient (fbpyutils_ai/tools/http.py): Remover a lógica de parseamento de JSON e retornar o objeto httpx.Response diretamente. - Refatorar RequestsManager (fbpyutils_ai/tools/http.py): Remover a lógica de parseamento de JSON e retornar o objeto requests.Response diretamente. - Atualizar Código Cliente: Modificar o código para receber os objetos de resposta brutos e adicionar lógica de parseamento e tratamento de status. - Atualizar Testes Unitários (tests/tools/http/): Modificar mocks e stubs para simular o retorno de objetos de resposta brutos e ajustar asserções. - Atualizar Documentação: Localizar e atualizar a documentação existente para refletir as mudanças na interface. |
| PLAN_002_CENTRALIZE_HTTP_RETRY.md | Plano Atualizado para Centralizar a Lógica de Retry HTTP | - Fase 1: Análise e Identificação nos Clientes: Buscar por usos diretos da anotação @retry de tenacity ou outras bibliotecas de retry, identificar loops com blocos try-except que simulam comportamento de retry, verificar configurações de adaptadores HTTP com max_retries fora das classes centrais, analisar qualquer outra implementação manual de lógica de nova tentativa. - Fase 2: Verificação e Padronização das Classes Centrais (HTTPClient e RequestsManager): Analisar as classes HTTPClient e RequestsManager em fbpyutils_ai/tools/http.py, confirmar que o uso existente de tenacity e HTTPAdapter é adequado, avaliar se os parâmetros de retry são configuráveis e se atendem às necessidades gerais. - Fase 3: Proposta de Refatoração dos Clientes: Detalhar como a lógica de retry local será removida, garantir que as chamadas existentes aos métodos de HTTPClient ou RequestsManager pelos clientes não tenham suas assinaturas alteradas, garantir que toda a responsabilidade de retry seja delegada às classes centrais. - Fase 4: Análise de Impacto e Ajuste dos Testes Unitários: Identificar todos os testes unitários existentes para os arquivos clientes modificados e para as classes HTTPClient e RequestsManager, analisar como a remoção da lógica de retry dos clientes e a centralização/padronização nas classes HTTP podem afetar esses testes, propor ajustes nos testes. - Fase 5: Implementação e Refatoração: Implementar as melhorias propostas na Fase 2 para as classes HTTPClient e RequestsManager, refatorar os arquivos clientes identificados na Fase 1 para remover a lógica de retry local, garantir que os clientes utilizem as classes centrais para todas as requisições HTTP, implementar os ajustes nos testes unitários, executar os testes unitários. |
| PLAN_003_UPDATE_FIRECRAWL_V1.md | Plano para Atualizar FireCrawlTool para API v1 (Self-Hosted) e Suporte MCP | - Requisitos Iniciais: Atualizar a classe FireCrawlTool para utilizar a v1 da API do serviço firecrawl.dev disponibilizado localmente via SELF HOSTING, implementar os serviços scrape, scrape, extract, map, search e métodos auxiliares usando a documentação da API v1 e o HTTPClient, "achatar" (flatten) os métodos, garantir que apenas os argumentos suportados pelo modo self-hosted sejam utilizados, implementar novos métodos (scrape_formatted, scrape_multiple) na classe FireCrawlTool que repliquem a funcionalidade de formatação e processamento paralelo do script fbpyutils_ai/servers/mcp_scrape_server.py, certificar-se de retornar sempre um JSON de resposta, utilizar as recomendações em VIBE.md, atualizar/criar testes unitários, atualizar a documentação. - Passos Detalhados: Refinar __init__, implementar/verificar métodos auxiliares, "flatterizar" métodos principais, implementar suporte MCP - scrape_formatted, implementar suporte MCP - scrape_multiple, atualizar documentação final. |
| PLAN_004_REFACTOR_FIRECRAWL_TOOL.md | Plano de Refatoração da Classe `FireCrawlTool` | - Modificação do Código (fbpyutils_ai/tools/scrape.py): Editar o arquivo fbpyutils_ai/tools/scrape.py, remover as definições completas dos métodos scrape, get_crawl_status, cancel_crawl, get_crawl_errors, get_batch_scrape_status, get_batch_scrape_errors, batch_scrape, get_extract_status, extract, map da classe FireCrawlTool, remover as definições completas das funções utilitárias (métodos privados) _format_metadata_md, _format_links_md, _format_scrape_result_md, scrape_formatted, scrape_multiple, remover a função scrape_and_store, remover os imports não utilizados, manter intactos o método __init__, o método scrape e o método search. - Atualização da Documentação: Editar o arquivo DOC.md, revisar a seção referente à classe FireCrawlTool, remover a documentação e exemplos de uso para os métodos removidos, manter e refinar a documentação para os métodos __init__, scrape e search, editar o arquivo README.md, revisar o conteúdo para identificar e remover quaisquer menções diretas ou exemplos de uso dos métodos removidos, manter menções gerais à capacidade de "scrape" e "search" se apropriado, manter a pasta specs/ e todos os seus arquivos intactos. - Atualização dos Testes Unitários: Identificar e remover arquivos de teste, remover os arquivos test_batch_scrape.py, test_cancel_crawl.py, test_crawl.py, test_extract.py, test_get_batch_scrape_errors.py, test_get_batch_scrape_status.py, test_get_crawl_errors.py, test_get_crawl_status.py, test_get_extract_status.py, test_map.py da pasta tests/tools/scrape/, revisar arquivos de teste existentes, revisar o arquivo tests/tools/scrape/test_scrape.py, revisar o arquivo tests/tools/scrape/test_search.py, revisar o arquivo tests/tools/test_tools.py e tests/servers/mcp_scrape_server.py. - Verificação Final e Cobertura de Código: Executar todos os testes unitários restantes, revisar o relatório de cobertura. |
| PLAN_005_CREATE_UI_MARIMO.md | Plano de Execução | - Criação do Módulo app.firecrawl_tool.py: Criar o arquivo fbpyutils_ai/ui/marimo/app.firecrawl_tool.py, copiar a estrutura básica de app.search_tool.py, importar a classe FireCrawlTool, considerar o uso de fbpyutils_ai/ui/marimo/components.py, definir as células Marimo para inicializar a FireCrawlTool, criar os elementos de UI para os parâmetros do método scrape, criar os elementos de UI para os parâmetros do método search, implementar a lógica para chamar o método scrape, implementar a lógica para chamar o método search, exibir os resultados, organizar as seções scrape e search dentro de um mo.accordion. - Integração na Interface Geral (Futuro): Criar um arquivo app.main.py que importe e exiba os módulos app.llm_tool.py, app.search_tool.py e app.firecrawl_tool.py em uma única interface, a interface geral utilizará o componente mo.ui.sidebar. - Finalização dos Módulos Existentes (Mediante Requisições): Realizada conforme futuras requisições para app.llm_tool.py e app.search_tool.py. - Atualização da Documentação do Projeto: Atualizar os arquivos README.md, TODO.md, TOOLS.md e TREE.md para incluir a nova ferramenta FireCrawlTool e sua funcionalidade, adicionar informações sobre a estrutura da UI Marimo. - Registro no Banco de Memória: Atualizar os arquivos do banco de memória para refletir as mudanças no projeto. - Commit do Repositório: Realizar commits significativos após a conclusão de cada etapa principal. |
| PLAN_006_RELEASE_V0.1.1.md | Plano Detalhado | - Criar Conteúdo para a Sessão Home na UI Marimo: Definir o Conteúdo da Home, modificar fbpyutils_ai/ui/marimo/app.py. - Atualizar Documentação (README.md, TODO.md, TOOLS.md, TREE.md): Atualizar README.md, atualizar TODO.md, atualizar TOOLS.md, atualizar TREE.md. - Atualizar Banco de Memória: Revisar e Atualizar memory-bank/activeContext.md e memory-bank/progress.md. - Implementar Sub-sessões "Generate Text" e "Generate Embeddings" na UI Marimo: Modificar fbpyutils_ai/ui/marimo/app.py, para "Generate Text" criar uma função get_llm_generate_text_section(), para "Generate Embeddings" criar uma função get_llm_generate_embeddings_section(), garantir que os modelos llm_base_model e llm_embed_model sejam utilizados corretamente. - Re-atualizar Documentação: Revisar README.md, revisar TODO.md, revisar TOOLS.md, revisar TREE.md. - Re-atualizar Banco de Memória: Revisar e Atualizar memory-bank/activeContext.md, revisar e Atualizar memory-bank/progress.md. |
